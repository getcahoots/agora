!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var a=["opacity",t,~~(100*e),i,n].join("-"),o=.01+i/n*100,r=Math.max(1-(1-e)/t*(100-o),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=s&&"-"+s+"-"||"";return u[a]||(p.insertRule("@"+c+"keyframes "+a+"{0%{opacity:"+r+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",p.cssRules.length),u[a]=1),a}function n(e,t){var i,n,a=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<d.length;n++)if(i=d[n]+t,void 0!==a[i])return i;return void 0!==a[t]?t:void 0}function a(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function o(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=o(e||{},s.defaults,f)}function c(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,n){function o(){return a(i("group",{coordsize:d+" "+d,coordorigin:-l+" "+-l}),{width:d,height:d})}function s(e,s,c){t(p,t(a(o(),{rotation:360/n.lines*e+"deg",left:~~s}),t(a(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:c}),i("fill",{color:r(n.color,e),opacity:n.opacity}),i("stroke",{opacity:0}))))}var c,l=n.length+n.width,d=2*l,u=2*-(n.width+n.length)+"px",p=a(o(),{position:"absolute",top:u,left:u});if(n.shadow)for(c=1;c<=n.lines;c++)s(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=n.lines;c++)s(c);return t(e,p)},s.prototype.opacity=function(e,t,i,n){var a=e.firstChild;n=n.shadow&&n.lines||0,a&&t+n<a.childNodes.length&&(a=a.childNodes[t+n],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=i))}}var l,d=["webkit","Moz","ms","O"],u={},p=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},o(s.prototype,{spin:function(t){this.stop();var i=this,n=i.opts,o=i.el=a(e(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex});if(a(o,{left:n.left,top:n.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute("role","progressbar"),i.lines(o,i.opts),!l){var r,s=0,c=(n.lines-1)*(1-n.direction)/2,d=n.fps,u=d/n.speed,p=(1-n.opacity)/(u*n.trail/100),f=u/n.lines;!function h(){s++;for(var e=0;e<n.lines;e++)r=Math.max(1-(s+(n.lines-e)*f)%u*p,n.opacity),i.opacity(o,e*n.direction+c,r,n);i.timeout=i.el&&setTimeout(h,~~(1e3/d))}()}return i},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,o){function s(t,i){return a(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*d+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var c,d=0,u=(o.lines-1)*(1-o.direction)/2;d<o.lines;d++)c=a(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:l&&i(o.opacity,o.trail,u+d*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(c,a(s("#000","0 0 4px #000"),{top:"2px"})),t(n,t(c,s(r(o.color,d),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var h=a(e("group"),{behavior:"url(#default#VML)"});return!n(h,"transform")&&h.adj?c():l=n(h,"animation"),s}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin.js"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(i,n){return this.each(function(){var a=e(this),o=a.data();o.spinner&&(o.spinner.stop(),delete o.spinner),i!==!1&&(i=e.extend({color:n||a.css("color")},e.fn.spin.presets[i]||i),o.spinner=new t(i).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e,t,i){e.ichecked||(e.ichecked=function(){i=e.jQuery||e.Zepto;var n={autoInit:!0,autoAjax:!0,tap:!0,checkboxClass:"icheckbox",radioClass:"iradio",checkedClass:"checked",disabledClass:"disabled",indeterminateClass:"indeterminate",hoverClass:"hover",callbacks:{ifCreated:!1},classes:{base:"icheck",div:"#-item",area:"#-area-",input:"#-input",label:"#-label"}};e.icheck=i.extend(n,e.icheck);var a=e.navigator.userAgent,o=/MSIE [5-8]/.test(a)||t.documentMode<9,r=/Opera Mini/.test(a),s=n.classes.base,c=n.classes.div.replace("#",s),l=n.classes.area.replace("#",s),d=n.classes.input.replace("#",s),u=n.classes.label.replace("#",s);delete n.classes;var p,f,h="input[type=checkbox],input[type=radio]",m={},g={},y=new RegExp(s+"\\[(.*?)\\]"),b=function(e,t,i){return e&&(t=y.exec(e),t&&g[t[1]]&&(i=t[1])),i},v=e.getComputedStyle,k=e.PointerEvent||e.MSPointerEvent,C="ontouchend"in e,w=/mobile|tablet|phone|ip(ad|od)|android|silk|webos/i.test(a),x=["mouse","down","up","over","out"],N=e.PointerEvent?["pointer",x[1],x[2],x[3],x[4]]:["MSPointer","Down","Up","Over","Out"],j=["touch","start","end"],T=C&&w||k,E=T?C?j[0]+j[1]:N[0]+N[3]:x[0]+x[3],S=T?C?j[0]+j[2]:N[0]+N[4]:x[0]+x[4],A=T?C?!1:N[0]+N[1]:x[0]+x[1],D=T?C?!1:N[0]+N[2]:x[0]+x[2],I=r?"":E+".i "+S+".i ",M=!r&&A?A+".i "+D+".i":"",O=n.areaStyle!==!1?'position:absolute;display:block;content:"";top:#;bottom:#;left:#;right:#;':0,P="position:absolute!;display:block!;outline:none!;"+(n.debug?"":"opacity:0!;z-index:-99!;clip:rect(0 0 0 0)!;"),L=function(i,n,a){p||(p=t.createElement("style"),(t.head||t.getElementsByTagName("head")[0]).appendChild(p),e.createPopup||p.appendChild(t.createTextNode("")),f=p.sheet||p.styleSheet),n||(n="div."+(a?l+a+":after":c+" input."+d)),i=i.replace(/!/g," !important"),f.addRule?f.addRule(n,i,0):f.insertRule(n+"{"+i+"}",0)};L(P),(C&&w||r)&&L("cursor:pointer!;","label."+u+",div."+c),L("display:none!","iframe.icheck-frame");var R=function(e,t,i,n,a,o,r){return n=e.className,n?(a=" "+n+" ",1===i?o=t:0===i?r=t:(o=t[0],r=t[1]),o&&a.indexOf(" "+o+" ")<0&&(a+=o+" "),r&&~a.indexOf(" "+r+" ")&&(a=a.replace(" "+r+" "," ")),a=a.replace(/^\s+|\s+$/g,""),a!==n&&(e.className=a),a):void 0},z=function(e,t,n,a,o,r){g[t]&&(a=g[t],o=a.className,r=i(U(e,"div",o)),r.length&&(i(e).removeClass(d+" "+o).attr("style",a.style),i("label."+a.esc).removeClass(u+" "+o),i(r).replaceWith(i(e)),n&&q(e,t,n)),g[t]=!1)},B=function(e,t,n,a,o){for(n=[],a=e.length;a--;)if(t=e[a],t.type)~h.indexOf(t.type)&&n.push(t);else for(t=i(t).find(h),o=t.length;o--;)n.push(t[o]);return n},U=function(e,t,i,n){for(;e&&9!==e.nodeType;)if(e=e.parentNode,e&&e.tagName==t.toUpperCase()&&~e.className.indexOf(i)){n=e;break}return n},q=function(e,t,n){n="if"+n,g[t].callbacks&&g[t].callbacks[n]!==!1&&(i(e).trigger(n),"function"==typeof g[t].callbacks[n]&&g[t].callbacks[n](e,g[t]))},F=function(a,o,r,p){for(var f=B(a),y=f.length;y--;){for(var k,C,w,x,N,j,T,E,S,A,D,I,M,P,F,V,$,W,H=f[y],X=H.attributes,Z={},_=X.length,G={},J={},K=H.id,Y=H.className,et=H.type,tt=i.cache?i.cache[H[i.expando]]:0,it=b(Y),nt="",at=!1,ot=[],rt=e.FastClick?" needsclick":"";_--;)k=X[_].name,C=X[_].value,~k.indexOf("data-")&&(G[k.substr(5)]=C),"style"==k&&(T=C),Z[k]=C;tt&&tt.data&&(G=i.extend(G,tt.data));for(w in G)C=G[w],("true"==C||"false"==C)&&(C="true"==C),J[w.replace(/checkbox|radio|class|id|label/g,function(e,t){return 0===t?e:e.charAt(0).toUpperCase()+e.slice(1)})]=C;if(E=i.extend({},n,e.icheck,J,o),A=E.handle,"checkbox"!==A&&"radio"!==A&&(A=h),E.init!==!1&&~A.indexOf(et)){for(it&&z(H,it);!g[it];)if(it=Math.random().toString(36).substr(2,5),!g[it]){S=s+"["+it+"]";break}if(delete E.autoInit,delete E.autoAjax,E.style=T||"",E.className=S,E.esc=S.replace(/(\[|\])/g,"\\$1"),g[it]=E,P=U(H,"label",""),P&&(!P.htmlFor&&K&&(P.htmlFor=K),ot.push(P)),K)for(F=i('label[for="'+K+'"]');F.length--;)M=F[F.length],M!==P&&ot.push(M);for(W=ot.length;W--;)M=ot[W],$=M.className,V=b($),$=V?R(M,s+"["+V+"]",0):($?$+" ":"")+u,M.className=$+" "+S+rt;if(D=t.createElement("div"),E.inherit)for(x=E.inherit.split(/\s*,\s*/),j=x.length;j--;)N=x[j],void 0!==Z[N]&&("class"==N?nt+=Z[N]+" ":D.setAttribute(N,"id"==N?s+"-"+Z[N]:Z[N]));nt+=E[et+"Class"],nt+=" "+c+" "+S,E.area&&O&&(at=0|(""+E.area).replace(/%|px|em|\+|-/g,""),at&&(m[at]||(L(O.replace(/#/g,"-"+at+"%"),!1,at),m[at]=!0),nt+=" "+l+at)),D.className=nt+rt,H.className=(Y?Y+" ":"")+d+" "+S,H.parentNode.replaceChild(D,H),D.appendChild(H),E.insert&&i(D).append(E.insert),at&&(I=v?v(D,null).getPropertyValue("position"):D.currentStyle.position,"static"==I&&(D.style.position="relative")),Q(H,D,it,"updated",!0,!1,r),g[it].done=!0,p||q(H,it,"Created")}}},Q=function(e,t,i,n,a,o,r){var s=g[i],c={},l={};c.checked=[e.checked,"Checked","Unchecked"],o&&!r||"click"===n||(c.disabled=[e.disabled,"Disabled","Enabled"],c.indeterminate=["true"==e.getAttribute("indeterminate")||!!e.indeterminate,"Indeterminate","Determinate"]),"updated"==n||"click"==n?(l.checked=o?!c.checked[0]:c.checked[0],o&&!r||"click"===n||(l.disabled=c.disabled[0],l.indeterminate=c.indeterminate[0])):"checked"==n||"unchecked"==n?l.checked="checked"==n:"disabled"==n||"enabled"==n?l.disabled="disabled"==n:"indeterminate"==n||"determinate"==n?l.indeterminate="determinate"!==n:l.checked=!c.checked[0],V(e,t,c,l,i,s,n,a,o,r)},V=function(e,t,n,a,o,r,s,c,l,d,u){var p,f,h,m,y,v,k,C,x,N,j,T,E,S,A=e.type,D="radio"==A?"Radio":"Checkbox",I="LabelClass";if(t||(t=U(e,"div",r.className)),t){for(p in a)if(f=a[p],n[p][0]!==f&&"updated"!==s&&"click"!==s&&(e[p]=f),d&&(f?e.setAttribute(p,p):e.removeAttribute(p)),r[p]!==f){if(r[p]=f,E=!0,"checked"==p&&(S=!0,!u&&f&&(g[o].done||d)&&"radio"==A&&e.name))for(v=U(e,"form",""),k='input[name="'+e.name+'"]',k=v&&!d?i(v).find(k):i(k),C=k.length;C--;)x=k[C],N=b(x.className),e!==x&&g[N]&&g[N].checked&&(j={checked:[!0,"Checked","Unchecked"]},T={checked:!1},V(x,!1,j,T,N,g[N],"updated",c,l,d,!0));if(h=[r[p+"Class"],r[p+D+"Class"],r[n[p][1]+"Class"],r[n[p][1]+D+"Class"],r[p+I]],m=[h[3]||h[2],h[1]||h[0]],f&&m.reverse(),R(t,m),r.mirror&&h[4])for(y=i("label."+r.esc);y.length--;)R(y[y.length],h[4],f?1:0);(!c||u)&&q(e,o,n[p][f?1:2])}(!c||u)&&(E&&q(e,o,"Changed"),S&&q(e,o,"Toggled")),r.cursor&&!w&&(r.disabled||r.pointer?r.disabled&&r.pointer&&(t.style.cursor="default",r.pointer=!1):(t.style.cursor="pointer",r.pointer=!0)),g[o]=r}};i.fn.icheck=function(e,t){if(/^(checked|unchecked|indeterminate|determinate|disabled|enabled|updated|toggle|destroy|data|styler)$/.test(e))for(var i=B(this),n=i.length;n--;){var a=i[n],o=b(a.className);if(o){if("data"==e)return g[o];if("styler"==e)return U(a,"div",g[o].className);"destroy"==e?z(a,o,"Destroyed"):Q(a,!1,o,e),"function"==typeof t&&t(a)}}else"object"!=typeof e&&e||F(this,e||{});return this};var $;i(t).on("click.i "+I+M,"label."+u+",div."+c,function(e){var t=this,n=b(t.className);if(n){var a,s,c,l,d=e.type,u=g[n],p=u.esc,f="DIV"==t.tagName,h=[["label",u.activeLabelClass,u.hoverLabelClass],["div",u.activeClass,u.hoverClass]];if(f&&h.reverse(),d==A||d==D){if(h[0][1]&&R(t,h[0][1],d==A?1:0),u.mirror&&h[1][1])for(c=i(h[1][0]+"."+p);c.length--;)R(c[c.length],h[1][1],d==A?1:0);f&&d==D&&u.tap&&w&&k&&!r&&(l=!0)}else if(d==E||d==S){if(h[0][2]&&R(t,h[0][2],d==E?1:0),u.mirror&&h[1][2])for(c=i(h[1][0]+"."+p);c.length--;)R(c[c.length],h[1][2],d==E?1:0);f&&d==S&&u.tap&&w&&C&&!r&&(l=!0)}else f&&(w&&(C||k)&&u.tap&&!r||(l=!0));l&&setTimeout(function(){s=e.currentTarget||{},"LABEL"!==s.tagName&&(!u.change||+new Date-u.change>100)&&(a=i(t).find("input."+p).click(),(o||r)&&a.change())},2)}}).on("click.i change.i focusin.i focusout.i keyup.i keydown.i","input."+d,function(e){var t=this,n=b(t.className);if(n){var a,o,r=e.type,s=g[n],c=s.esc,l="click"==r?!1:U(t,"div",s.className);if("click"==r)g[n].change=+new Date,e.stopPropagation();else if("change"==r)l&&!t.disabled&&Q(t,l,n,"click");else if(~r.indexOf("focus")){if(o=[s.focusClass,s.focusLabelClass],o[0]&&l&&R(l,o[0],"focusin"==r?1:0),s.mirror&&o[1])for(a=i("label."+c);a.length--;)R(a[a.length],o[1],"focusin"==r?1:0)}else l&&!t.disabled&&("keyup"==r?(("checkbox"==t.type&&32==e.keyCode&&s.keydown||"radio"==t.type&&!t.checked)&&Q(t,l,n,"click",!1,!0),g[n].keydown=!1,g[$]&&(g[$].keydown=!1)):($=n,g[n].keydown=!0))}}).ready(function(){if(e.icheck.autoInit&&i("."+s).icheck(),e.jQuery){var n=t.body||t.getElementsByTagName("body")[0];i.ajaxSetup({converters:{"text html":function(a){if(e.icheck.autoAjax&&n){var r,c=t.createElement("iframe");o||(c.style="display:none"),c.className="iframe.icheck-frame",c.src="about:blank",n.appendChild(c),r=c.contentDocument?c.contentDocument:c.contentWindow.document,r.open(),r.write(a),r.close(),n.removeChild(c),r=i(r),F(r.find("."+s),{},!0),r=r[0],a=(r.body||r.getElementsByTagName("body")[0]).innerHTML,r=null}return a}}})}})},"function"==typeof define&&define.amd?define("icheck",[e.jQuery?"jquery":"zepto"],e.ichecked):e.ichecked())}(window,document),function(e,t,i){"use strict";t.icheck={autoInit:!1,autoAjax:!1},e(i).on("ready ajaxSuccess",function(){e("input:not(.icheck-input)").icheck()}),e(function(){e(i).on("click",".ToggleFlyout",function(t){e(".InProgress",t.currentTarget).spin({lines:11,radius:5,length:5,width:2})}),e(i).on("click",".EditComment",function(t){e(".TinyProgress",e(t.currentTarget).closest(".Item")).empty().spin({lines:9,radius:3,length:3,width:2})}),e(i).on("click",".MorePager a",function(t){e(t.currentTarget).parent().spin({lines:9,radius:3,length:3,width:2})});var t=".Overlay",n="> .Popup",a=function(){var t=e(this),i=e('<div class="backdrop fade">');e("body").addClass("modal-open"),e(n,t).addClass("fade"),t.data("backdrop")||(t.data("backdrop",i),t.append(i)),setTimeout(function(){i.addClass("in").spin({lines:11,radius:10,length:10,width:4})},0)},o=function(){var t=e(this),i=t.data("backdrop");e(n,t).addClass("in"),i.length&&i.spin(!1)},r=function(){var i=e(this),a=i.data("backdrop");e(n,i).removeClass("in"),setTimeout(function(){a.length&&a.removeClass("in"),e("body").removeClass("modal-open")},150),setTimeout(function(){e(t).remove()},300)};e(i).on("popupLoading",function(){e(t).each(a)}).on("popupReveal",function(){e(t).each(o)}).on("popupClose",function(){e(t).each(r)});var s=["a.Delete","a.DeleteComment","a.DeleteFile","a.PopConfirm","a.ClearConversation","ul#DP_Remove a"];e(i).on("click",s.join(),function(){e(i).trigger("popupLoading"),setTimeout(function(){e(i).trigger("popupReveal")},150)})}),e.popup.close=function(t){return e(i).unbind("keydown.popup"),e("#"+t.popupId).trigger("popupClose"),!1}}(jQuery,window,document);